# global:
#   namespace: default
#   secretStoreRef:
#     name: "cluster-secret-store"
#     kind: ClusterSecretStore

# externalSecrets:
#   - name: tiktoken-test-credentials
#     # target:
#     #   name: tiktoken-test-secret
#     #   creationPolicy: Owner
#     dataFrom:
#       - extractKey: "tiktoken-config"  

basic-app:
  # appName: host-agent   # cluster set this value at runtime
  serviceAccount: 
    create: false 
    # name: mcp-poc  # cluster set this value at runtime

  replicaCount: 1

  # image: 042889969014.dkr.ecr.us-east-1.amazonaws.com/host_agent:20250909181710   # this value will come from application repo
  imagePullPolicy: IfNotPresent

  ports:
  - name: http
    servicePort: 8000
    containerPort: 8000

  envFrom:
    - secretRef:
        name: aws-config-secret
    - secretRef:
        name: middleware-secret
    - secretRef:
        name: unified-db-config-secret
    - secretRef:
        name: tiktoken-config-secret
    - secretRef:
        name: redis-config-secret
    - secretRef:
        name: keycloak-config-secret
    - secretRef:
        name: aes-encryption-key-secret
    - secretRef:
        name: otel-config-secret
  env:
    - name: "TARGET_API_BASE"
      value: "https://hostagent.yashtechai.link"
    - name: "TARGET_API_PROMPT_ENHANCER"
      value: "https://prompt-enhancer.yashtechai.link"
    - name: "KEYCLOAK_CLIENT_ID"
      value: "unified_a2a_app"
    - name: "GRAPH_API_URL"
      value: "https://login.microsoftonline.com/638456b8-8343-4e48-9ebe-4f5cf9a1997d/oauth2/v2.0/token"
    - name: "TOKEN_URL"
      value: "https://login.microsoftonline.com/638456b8-8343-4e48-9ebe-4f5cf9a1997d/oauth2/v2.0/token"

  resources:
    requests:
      cpu: "20m"                # Minimum CPU guaranteed
      memory: "400Mi"            # Minimum memory guaranteed
    limits:
      cpu: "50m"                # Max CPU allowed
      memory: "1024Mi"            # Max memory allowed

  ingress:
    enabled: true
    hostname:
      appdomain: api-agentspace
      # domain: prod.yashtechai.link   # cluster set this value at runtime
    servicePort: 8000
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      nginx.ingress.kubernetes.io/proxy-body-size: "500m"
      nginx.ingress.kubernetes.io/proxy-read-timeout: "1800"
      nginx.ingress.kubernetes.io/proxy-send-timeout: "1800"
      nginx.ingress.kubernetes.io/proxy-connect-timeout: "1800"
    tls: true
    paths:
      - path: /
        pathType: Prefix

  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 1
    targetCPUUtilizationPercentage: 75
    targetMemoryUtilizationPercentage: 80


  livenessProbe: {}
    # httpGet:
    #   path: /
    #   port: http
    # initialDelaySeconds: 10
    # periodSeconds: 5

  readinessProbe: {}
    # httpGet:
    #   path: /
    #   port: http
    # initialDelaySeconds: 5
    # periodSeconds: 3

  podSecurityContext: {}
  securityContext: {}

  imagePullSecrets: []
  nodeSelector: {}
  affinity: {}
  tolerations: []
